<!doctype html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-126807198-1"></script><script>window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-126807198-1');</script><title>WordPress Integration â€“ Timber Documentation</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="robots" content="noindex"><meta name="docsearch:version" content="v2"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"><link rel="stylesheet" href="/docs/build/css/styles.css?id=4ad65e61875327798b94"><link rel="stylesheet" href="/docs/build/css/mobile.css?id=29c5a2ca19eb3669315e" media="screen and (max-width: 979px)"><script src="/docs/build/js/app.js?id=e51c53f0441136cbf958" defer="defer"></script><link rel="icon" href="/docs/build/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon-precomposed" sizes="57x57" href="/docs/build/favicons/apple-touch-icon-57x57.png"><link rel="apple-touch-icon-precomposed" sizes="114x114" href="/docs/build/favicons/apple-touch-icon-114x114.png"><link rel="apple-touch-icon-precomposed" sizes="72x72" href="/docs/build/favicons/apple-touch-icon-72x72.png"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/docs/build/favicons/apple-touch-icon-144x144.png"><link rel="apple-touch-icon-precomposed" sizes="60x60" href="/docs/build/favicons/apple-touch-icon-60x60.png"><link rel="apple-touch-icon-precomposed" sizes="120x120" href="/docs/build/favicons/apple-touch-icon-120x120.png"><link rel="apple-touch-icon-precomposed" sizes="76x76" href="favicons/apple-touch-icon-76x76.png"><link rel="apple-touch-icon-precomposed" sizes="152x152" href="favicons/apple-touch-icon-152x152.png"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-196x196.png" sizes="196x196"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/docs/build/favicons/favicon-128.png" sizes="128x128"><meta name="application-name" content="Timber Documentation"><meta name="msapplication-TileColor" content="#FFFFFF"><meta name="msapplication-TileImage" content="/docs/build/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="/docs/build/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="/docs/build/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="/docs/build/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="/docs/build/favicons/mstile-310x310.png"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@TimberWP"><meta name="twitter:title" content="Timber for WordPress Documentation"><meta name="twitter:description" content="Create WordPress themes with beautiful OOP code and the Twig Template Engine"><meta name="twitter:image" content="https://repository-images.githubusercontent.com/7413451/06c62480-b95c-11ea-8b35-b5dd97d070f1"></head><body><header class="header"><div class="logoContainer"><a href="/docs/"><img src="/docs/build/img/timber-logo.svg" alt="Timber Logo" style="width: 105px; height: 30px; border: 0" role="img"></a></div><div class="search"><label for="search-input" class="sr-only">Search</label> <input type="search" name="search" class="search-input" id="search-input" placeholder="Search the docs"><div class="search-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"></path></svg></div></div><nav class="navTop" id="nav-top"><ul><li><a href="http://upstatement.com/timber/" target="_blank" rel="noreferrer noopener">About Timber</a></li><li><a href="http://twig.sensiolabs.org/doc/templates.html" target="_blank" rel="noreferrer noopener">Twig Docs</a></li><li><a href="https://github.com/timber/timber" target="_blank" rel="noreferrer noopener"><img src="/docs/build/img/github.png" alt="Star on Github" style="width: 29px; height: 29px; border: 0"></a></li></ul></nav><button class="navMobileToggle js-menu-open" type="button" id="nav-mobile-toggle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 34"><path d="M45.6,19.43H2.4a2.43,2.43,0,0,1,0-4.86H45.6a2.43,2.43,0,0,1,0,4.86Z"/><path d="M45.6,4.86H2.4A2.41,2.41,0,0,1,0,2.43,2.41,2.41,0,0,1,2.4,0H45.6A2.41,2.41,0,0,1,48,2.43,2.41,2.41,0,0,1,45.6,4.86Z"/><path d="M45.6,34H2.4a2.43,2.43,0,0,1,0-4.86H45.6a2.43,2.43,0,0,1,0,4.86Z"/></svg> <span class="sr-only">Menu</span></button></header><div class="wrapper"><aside class="sidebar slideup-menu" id="sidebar" data-turbolinks-keep-scroll-position><button class="navClose js-menu-close" type="button"><div class="navClose-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M3.43,48A3.43,3.43,0,0,1,1,42.15L42.15,1A3.43,3.43,0,1,1,47,5.85L5.85,47A3.4,3.4,0,0,1,3.43,48Z"/><path d="M44.57,48a3.4,3.4,0,0,1-2.42-1L1,5.85A3.43,3.43,0,0,1,5.85,1L47,42.15A3.43,3.43,0,0,1,44.57,48Z"/></svg></div><span class="sr-only">Close Menu</span></button><nav class="navVersions"><ul><li><a href="/docs/">v1.0</a></li><li><a href="/docs/v2" class="is-current">v2.0 DEV</a></li></ul></nav><nav id="nav-main" class="navMain"><ul class="navMain-sections"><li class="navMain-section"><h3 class="navMain-title">Installation</h3><ul class="navMain-items"><li class="navMain-item" data-order="10"><a class="navMain-link" href="/docs/v2/installation/">Installation</a></li><li class="navMain-item" data-order="30"><a class="navMain-link" href="/docs/v2/installation/manage-timber-with-composer/">Managing Timber with Composer</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Getting Started</h3><ul class="navMain-items"><li class="navMain-item" data-order="100"><a class="navMain-link" href="/docs/v2/getting-started/introduction/">Introduction</a></li><li class="navMain-item" data-order="200"><a class="navMain-link" href="/docs/v2/getting-started/template-inheritance-and-includes/">Template inheritance and includes</a></li><li class="navMain-item" data-order="300"><a class="navMain-link" href="/docs/v2/getting-started/a-single-post/">A single post</a></li><li class="navMain-item" data-order="400"><a class="navMain-link" href="/docs/v2/getting-started/a-post-archive/">A post archive</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title navMain-sectionTitle">Guides</h3><ul class="navMain-items"><li class="navMain-item" data-order="50"><a class="navMain-link" href="/docs/v2/guides/context/">Context</a></li><li class="navMain-item" data-order="75"><a class="navMain-link" href="/docs/v2/guides/template-locations/">Template Locations</a></li><li class="navMain-item" data-order="100"><a class="navMain-link" href="/docs/v2/guides/wp-integration/" aria-current>WordPress Integration</a></li><li class="navMain-item" data-order="140"><a class="navMain-link" href="/docs/v2/guides/comments/">Comments</a></li><li class="navMain-item" data-order="150"><a class="navMain-link" href="/docs/v2/guides/menus/">Menus</a></li><li class="navMain-item" data-order="200"><a class="navMain-link" href="/docs/v2/guides/cookbook-twig/">Twig Cookbook</a></li><li class="navMain-item" data-order="300"><a class="navMain-link" href="/docs/v2/guides/cookbook-text/">Text Cookbook</a></li><li class="navMain-item" data-order="400"><a class="navMain-link" href="/docs/v2/guides/escaping/">Escaping</a></li><li class="navMain-item" data-order="500"><a class="navMain-link" href="/docs/v2/guides/custom-page-templates/">Custom Page Templates</a></li><li class="navMain-item" data-order="600"><a class="navMain-link" href="/docs/v2/guides/custom-fields/">Custom Fields</a></li><li class="navMain-item" data-order="800"><a class="navMain-link" href="/docs/v2/guides/functions/">Functions</a></li><li class="navMain-item" data-order="900"><a class="navMain-link" href="/docs/v2/guides/filters/">Filters</a></li><li class="navMain-item" data-order="1000"><a class="navMain-link" href="/docs/v2/guides/cookbook-images/">Image Cookbook</a></li><li class="navMain-item" data-order="1100"><a class="navMain-link" href="/docs/v2/guides/pagination/">Pagination</a></li><li class="navMain-item" data-order="1200"><a class="navMain-link" href="/docs/v2/guides/sidebars/">Sidebars</a></li><li class="navMain-item" data-order="1300"><a class="navMain-link" href="/docs/v2/guides/performance/">Performance/Caching</a></li><li class="navMain-item" data-order="1350"><a class="navMain-link" href="/docs/v2/guides/date-time/">Date/Time in Timber</a></li><li class="navMain-item" data-order="1400"><a class="navMain-link" href="/docs/v2/guides/internationalization/">Internationalization</a></li><li class="navMain-item" data-order="1500"><a class="navMain-link" href="/docs/v2/guides/cheatsheet/">Cheatsheet</a></li><li class="navMain-item" data-order="1600"><a class="navMain-link" href="/docs/v2/guides/extending-timber/">Extending Timber</a></li><li class="navMain-item" data-order="1800"><a class="navMain-link" href="/docs/v2/guides/debugging/">Debugging</a></li><li class="navMain-item" data-order="1900"><a class="navMain-link" href="/docs/v2/guides/testing/">Automated Testing</a></li><li class="navMain-item" data-order="2000"><a class="navMain-link" href="/docs/v2/guides/routing/">Routing</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/guides/gutenberg/">Gutenberg</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/guides/woocommerce/">WooCommerce</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Reference</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-archives/">Archives</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-attachment/">Attachment</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-comment/">Comment</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-datetimehelper/">DateTimeHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-image/">Image</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-imagehelper/">ImageHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-menu/">Menu</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-menuitem/">MenuItem</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-pagination/">Pagination</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-pathhelper/">PathHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-post/">Post</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-postcollection/">PostCollection</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-postquery/">PostQuery</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-site/">Site</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-term/">Term</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-texthelper/">TextHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-theme/">Theme</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-timber/">Timber</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-urlhelper/">URLHelper</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/reference/timber-user/">User</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Hooks</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/hooks/actions/">Action Hooks</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/hooks/filters/">Filter Hooks</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Integrations</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/integrations/advanced-custom-fields/">Advanced Custom Fields</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Upgrade Guides</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/upgrade-guides/1.0/">Upgrade to 1.0</a></li><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/upgrade-guides/2.0/">Upgrade to 2.0</a></li></ul></li><li class="navMain-section"><h3 class="navMain-title">Contributing</h3><ul class="navMain-items"><li class="navMain-item" data-order=""><a class="navMain-link" href="/docs/v2/contributing/">Contributing to Timber</a></li></ul></li></ul></nav></aside><main><div class="globalCallout"><h2>Version 2 ðŸ‘‹</h2><p>Youâ€™re looking at the documentation for version 2 of Timber, which is <strong>still in development</strong>. You canâ€™t use it yet, but you may have a look at the <a href="https://timber.github.io/docs/v2/upgrade-guides/2.0/">upcoming changes</a>.</p><p>Follow us on <a href="https://twitter.com/TimberWP">Twitter</a> or start <a href="https://help.github.com/en/enterprise/2.15/user/articles/watching-and-unwatching-repositories#watching-a-single-repository">watching new releases</a> of our <a href="https://github.com/timber/timber/">GitHub repository</a> to be notified about a version you can use.</p></div><article><h1>WordPress Integration</h1><aside><h2 class="heading-small">On this page</h2><nav class="toc"><ol><li><a href="#the_content">the_content</a></li><li><a href="#hooks">Hooks</a></li><li><a href="#actions">Actions</a></li><li><a href="#filters">Filters</a><ol><li><a href="#real-world-example-with-woocommerce">Real world example with WooCommerce</a></li></ol></li><li><a href="#widgets">Widgets</a><ol><li><a href="#using-timber-inside-your-own-widgets">Using Timber inside your own widgets</a></li></ol></li><li><a href="#shortcodes">Shortcodes</a><ol><li><a href="#layouts-with-shortcodes">Layouts with Shortcodes</a><ol><li><a href="#using-a-filter">Using a Filter</a></li></ol></li></ol></li><li><a href="#password-protected-posts">Password protected posts</a></li></ol></nav></aside><div class="content"><p>Timber plays nicely with your existing WordPress setup. You can still use other plugins, etc.</p><h2 id="the_content">the_content <a class="directLink" href="#the_content">#</a></h2><p>Youâ€™re probably used to call <code>the_content()</code> in your theme file. This is good. Before outputting, WordPress will run all the filters and actions that your plugins and themes are using. If you want to get this into your new Timber theme (and you probably do), call it like this:</p><pre class="language-twig"><code class="language-twig"><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>my-article<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">post</span><span class="token punctuation">.</span><span class="token property">content</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><br><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span></code></pre><p>This differs from <code>{{ post.post_content }}</code>, which will display the raw text stored in the database.</p><h2 id="hooks">Hooks <a class="directLink" href="#hooks">#</a></h2><p>Timber hooks to interact with WordPress use <code>this/style/of_hooks</code> instead of <code>this_style_of_hooks</code>. This matches the same methodology as <a href="http://www.advancedcustomfields.com/resources/#actions">Advanced Custom Fields</a>.</p><p>Full documentation to come.</p><h2 id="actions">Actions <a class="directLink" href="#actions">#</a></h2><p>You can all actions in your Twig templates like this:</p><pre class="language-twig"><code class="language-twig"><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">do</span></span> <span class="token property">action</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>my_action<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">do</span></span> <span class="token property">action</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>my_action_with_args<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token string"><span class="token punctuation">'</span>foo<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token string"><span class="token punctuation">'</span>bar<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">%}</span></span></span></code></pre><p>If you ask yourself why thereâ€™s no underline between <code>do</code> and <code>action</code>: The expression <a href="https://twig.symfony.com/doc/tags/do.html"><code>do</code></a> is a feature of Twig which <em>calls a function without printing its return value</em>, like <code>{{ }}</code> does. Timber only register an <code>action</code> function, which then calls the <code>do_action()</code> function.</p><p>If you want anything from the template's context, you'll need to pass that manually:</p><pre class="language-twig"><code class="language-twig"><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">do</span></span> <span class="token property">action</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>my_action<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token string"><span class="token punctuation">'</span>foo<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token property">post</span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">%}</span></span></span></code></pre><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><br><span class="token function">add_action</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'my_action_with_args'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'my_function_with_args'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">my_function_with_args</span><span class="token punctuation">(</span> <span class="token variable">$foo</span><span class="token punctuation">,</span> <span class="token variable">$post</span> <span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">echo</span> <span class="token single-quoted-string string">'I say '</span> <span class="token punctuation">.</span> <span class="token variable">$foo</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'!'</span><span class="token punctuation">;</span><br>    <span class="token keyword">echo</span> <span class="token single-quoted-string string">'For the post with title '</span> <span class="token punctuation">.</span> <span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">title</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br></span></code></pre><h2 id="filters">Filters <a class="directLink" href="#filters">#</a></h2><p>Timber already comes with a <a href="https://timber.github.io/docs/v2/guides/filters/">set of useful filters</a>. If you have your own WordPress filters that you want to easily apply in Twig, you can use <code>apply_filters</code>.</p><pre class="language-twig"><code class="language-twig"><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">post</span><span class="token punctuation">.</span><span class="token property">content</span><span class="token operator">|</span><span class="token property">apply_filters</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>default_message<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><br><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token string"><span class="token punctuation">"</span>my custom string<span class="token punctuation">"</span></span><span class="token operator">|</span><span class="token property">apply_filters</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>default_message<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token property">param1</span><span class="token punctuation">,</span> <span class="token property">param2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">}}</span></span></span></code></pre><p>You can use your filter with a <a href="https://twig.symfony.com/doc/2.x/tags/filter.html">Twig filter tag</a>.</p><pre class="language-twig"><code class="language-twig"><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">filter</span></span> <span class="token property">apply_filters</span><span class="token punctuation">(</span> <span class="token string"><span class="token punctuation">'</span>default_message<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>    <span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">post</span><span class="token punctuation">.</span><span class="token property">content</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><br><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endfilter</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br><br><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">filter</span></span> <span class="token property">apply_filters</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>default_message<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token string"><span class="token punctuation">'</span>foo<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token string"><span class="token punctuation">'</span>bar, <span class="token punctuation">'</span></span><span class="token property">baz</span>' <span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>    <span class="token other">I love pizza</span><br><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endfilter</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span></code></pre><p>In <strong>PHP</strong>, you can get the content of the block with the first parameter and the rest of parameters like that.</p><pre class="language-php"><code class="language-php"><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'default_message'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'my_default_message'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">my_default_message</span><span class="token punctuation">(</span> <span class="token variable">$tag</span><span class="token punctuation">,</span> <span class="token variable">$param1</span><span class="token punctuation">,</span> <span class="token variable">$param2</span><span class="token punctuation">,</span> <span class="token variable">$param3</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">var_dump</span><span class="token punctuation">(</span> <span class="token variable">$tag</span><span class="token punctuation">,</span> <span class="token variable">$param1</span><span class="token punctuation">,</span> <span class="token variable">$param2</span><span class="token punctuation">,</span> <span class="token variable">$param3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'I love pizza', 'foo', 'bar, 'baz'</span><br><br>    <span class="token keyword">echo</span> <span class="token single-quoted-string string">'I have a message: '</span> <span class="token punctuation">.</span> <span class="token variable">$tag</span><span class="token punctuation">;</span> <span class="token comment">// I have a message: I love pizza</span><br><span class="token punctuation">}</span></code></pre><h3 id="real-world-example-with-woocommerce">Real world example with WooCommerce <a class="directLink" href="#real-world-example-with-woocommerce">#</a></h3><p>Sometimes in <strong>WooCommerce</strong> we find very long lines of code:</p><pre class="language-php"><code class="language-php"><span class="token keyword">echo</span> <span class="token single-quoted-string string">'&lt;li class="woocommerce-notice woocommerce-notice--info woocommerce-info">'</span> <span class="token punctuation">.</span> <span class="token function">apply_filters</span><span class="token punctuation">(</span><br>    <span class="token single-quoted-string string">'woocommerce_no_available_payment_methods_message'</span><span class="token punctuation">,</span><br>    <span class="token function">WC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">customer</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">get_billing_country</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token operator">?</span> <span class="token function">esc_html__</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'Sorry, it seems that there are no available payment methods for your state. Please contact us if you require assistance or wish to make alternate arrangements.'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'woocommerce'</span> <span class="token punctuation">)</span><br>        <span class="token punctuation">:</span> <span class="token function">esc_html__</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'Please fill in your details above to see available payment methods.'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'woocommerce'</span> <span class="token punctuation">)</span><br><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'&lt;/li>'</span><span class="token punctuation">;</span></code></pre><p>In <strong>Twig</strong>, you can do it like this:</p><pre class="language-twig"><code class="language-twig"><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>woocommerce-notice woocommerce-notice--info woocommerce-info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">customer</span><span class="token punctuation">.</span><span class="token property">get_billing_country</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token operator">?</span> <span class="token property">__</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>Sorry, it seems that there are no available payment methods for your state. Please contact us if you require assistance or wish to make alternate arrangements.<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token string"><span class="token punctuation">'</span>woocommerce<span class="token punctuation">'</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">:</span> <span class="token property">__</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>Please fill in your details above to see available payment methods.<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token string"><span class="token punctuation">'</span>woocommerce<span class="token punctuation">'</span></span><span class="token punctuation">)</span><br>        <span class="token operator">|</span><span class="token property">apply_filters</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>woocommerce_no_available_payment_methods_message<span class="token punctuation">'</span></span><span class="token punctuation">)</span><br>    <span class="token rd"><span class="token punctuation">}}</span></span></span><br><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></span></code></pre><p>And with the <code>filter</code> tag, it would look like this:</p><pre class="language-twig"><code class="language-twig"><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>woocommerce-notice woocommerce-notice--info woocommerce-info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">filter</span></span> <span class="token property">apply_filters</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>woocommerce_no_available_payment_methods_message<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>        <span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">if</span></span> <span class="token property">customer</span><span class="token punctuation">.</span><span class="token property">get_billing_country</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>            <span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">__</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>Sorry, it seems that there are no available payment methods for your state. Please contact us if you require assistance or wish to make alternate arrangements.<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token string"><span class="token punctuation">'</span>woocommerce<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><br>        <span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">else</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>            <span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">__</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>Please fill in your details above to see available payment methods.<span class="token punctuation">'</span></span><span class="token punctuation">,</span> <span class="token string"><span class="token punctuation">'</span>woocommerce<span class="token punctuation">'</span></span><span class="token punctuation">)</span>  <span class="token rd"><span class="token punctuation">}}</span></span></span><br>        <span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endif</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>    <span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endfilter</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></span></code></pre><h2 id="widgets">Widgets <a class="directLink" href="#widgets">#</a></h2><p>Everyone loves widgets! Of course they do...</p><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'footer_widgets'</span><span class="token punctuation">]</span> <span class="token operator">=</span> Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get_widgets</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'footer_widgets'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>...where <code>footer_widgets</code> is the registered name of the widgets you want to get (in twentythirteen these are called <code>sidebar-1</code> and <code>sidebar-2</code>).</p><p>Then use it in your template:</p><p><strong>base.twig</strong></p><pre class="language-twig"><code class="language-twig"><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">></span></span></span><br>    <span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">footer_widgets</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><br><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">></span></span></span></code></pre><h3 id="using-timber-inside-your-own-widgets">Using Timber inside your own widgets <a class="directLink" href="#using-timber-inside-your-own-widgets">#</a></h3><p>You can also use twig templates for your widgets! Letâ€™s imagine we want a widget that shows a random number each time it is rendered.</p><p>Inside the widget class, the widget function is used to show the widget:</p><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">widget</span><span class="token punctuation">(</span> <span class="token variable">$args</span><span class="token punctuation">,</span> <span class="token variable">$instance</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token variable">$number</span> <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">render</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'random-widget.twig'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><br>        <span class="token single-quoted-string string">'args'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token variable">$args</span><span class="token punctuation">,</span><br>        <span class="token single-quoted-string string">'instance'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token variable">$instance</span><span class="token punctuation">,</span><br>        <span class="token single-quoted-string string">'number'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token variable">$number</span><br>    <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></span></code></pre><p>The corresponding template file <code>random-widget.twig</code> looks like this:</p><pre class="language-twig"><code class="language-twig"><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">args</span><span class="token punctuation">.</span><span class="token property">before_widget</span><span class="token operator">|</span><span class="token property">raw</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><br><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">args</span><span class="token punctuation">.</span><span class="token property">before_title</span><span class="token operator">|</span><span class="token property">raw</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">instance</span><span class="token punctuation">.</span><span class="token property">title</span><span class="token operator">|</span><span class="token property">apply_filters</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>widget_title<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">args</span><span class="token punctuation">.</span><span class="token property">after_title</span><span class="token operator">|</span><span class="token property">raw</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><br><br><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Your magic number is: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span></span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">number</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></span><br><br><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">args</span><span class="token punctuation">.</span><span class="token property">after_widget</span><span class="token operator">|</span><span class="token property">raw</span> <span class="token rd"><span class="token punctuation">}}</span></span></span></code></pre><p>The raw filter is needed here to embed the widget properly.</p><p>You may also want to check if the Timber plugin was loaded before using it:</p><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">widget</span><span class="token punctuation">(</span> <span class="token variable">$args</span><span class="token punctuation">,</span> <span class="token variable">$instance</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span> <span class="token function">class_exists</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'Timber'</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">// if you want to show some error message, this is the right place</span><br>        <span class="token keyword">return</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token variable">$number</span> <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">render</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'random-widget.twig'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><br>        <span class="token single-quoted-string string">'args'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token variable">$args</span><span class="token punctuation">,</span><br>        <span class="token single-quoted-string string">'instance'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token variable">$instance</span><span class="token punctuation">,</span><br>        <span class="token single-quoted-string string">'number'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token variable">$number</span><br>    <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></span></code></pre><h2 id="shortcodes">Shortcodes <a class="directLink" href="#shortcodes">#</a></h2><p>Well, if it works for widgets, why shouldn't it work for shortcodes? Of course it does!</p><p>Letâ€™s implement a <code>[youtube]</code> shortcode which embeds a youtube video. For the desired usage of <code>[youtube id=xxxx]</code>, we only need a few lines of code:</p><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><span class="token comment">// Should be called from within an init action hook</span><br><span class="token function">add_shortcode</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'youtube'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'youtube_shortcode'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">youtube_shortcode</span><span class="token punctuation">(</span> <span class="token variable">$atts</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token keyword">isset</span><span class="token punctuation">(</span> <span class="token variable">$atts</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token function">sanitize_text_field</span><span class="token punctuation">(</span> <span class="token variable">$atts</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>        <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token boolean constant">false</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// This time we use Timber::compile since shortcodes should return the code</span><br>    <span class="token keyword">return</span> Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">compile</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'youtube-short.twig'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'id'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token variable">$id</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></span></code></pre><p>In <code>youtube-short.twig</code> we have the following template:</p><pre class="language-twig"><code class="language-twig"><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">if</span></span> <span class="token property">id</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>	<span class="token other">&lt;iframe width="560" height="315" src="//www.youtube.com/embed/</span><span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">id</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><span class="token other">" frameborder="0" allowfullscreen><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span></span><br><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endif</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span></code></pre><p>Now, when the YouTube embed code changes, we only need to edit the <code>youtube-short.twig</code> template. No need to search your PHP files for this one particular line.</p><h3 id="layouts-with-shortcodes">Layouts with Shortcodes <a class="directLink" href="#layouts-with-shortcodes">#</a></h3><p>Timber and Twig can process your shortcodes by using the <code>{% apply shortcodes %}</code> tag. Letâ€™s say you're using a <code>[tab]</code> shortcode, for example:</p><pre class="language-twig"><code class="language-twig"><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">apply</span></span> <span class="token property">shortcodes</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>    <span class="token other">[tabs tab1="Tab 1 title" tab2="Tab 2 title" layout="horizontal" backgroundcolor="" inactivecolor=""]<br>        [tab id=1]<br>            Something something something<br>        [/tab]<br><br>        [tab id=2]<br>            Tab 2 content here<br>        [/tab]<br>    [/tabs]</span><br><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endapply</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span></code></pre><h2 id="password-protected-posts">Password protected posts <a class="directLink" href="#password-protected-posts">#</a></h2><p>Itâ€™s recommended to use the <a href="https://developer.wordpress.org/reference/functions/post_password_required/"><code>post_password_required()</code></a> function to check if a post requires a password. You can add this check in all your single PHP template files</p><p><strong>single.php</strong></p><pre class="language-php"><code class="language-php"><span class="token variable">$context</span> <span class="token operator">=</span> Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$post</span> <span class="token operator">=</span> Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">query_post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$context</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'post'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$post</span><span class="token punctuation">;</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">post_password_required</span><span class="token punctuation">(</span> <span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">ID</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">render</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'single-password.twig'</span><span class="token punctuation">,</span> <span class="token variable">$context</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">render</span><span class="token punctuation">(</span> <span class="token keyword">array</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'single-'</span> <span class="token punctuation">.</span> <span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">ID</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'.twig'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'single-'</span> <span class="token punctuation">.</span> <span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">post_type</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'.twig'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'single.twig'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$context</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p><strong>single-password.twig</strong></p><pre class="language-twig"><code class="language-twig"><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">extends</span></span> <span class="token string"><span class="token punctuation">"</span>base.twig<span class="token punctuation">"</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br><br><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">block</span></span> <span class="token property">content</span> <span class="token rd"><span class="token punctuation">%}</span></span></span><br>    <span class="token tag"><span class="token ld"><span class="token punctuation">{{</span></span> <span class="token property">function</span><span class="token punctuation">(</span><span class="token string"><span class="token punctuation">'</span>get_the_password_form<span class="token punctuation">'</span></span><span class="token punctuation">)</span> <span class="token rd"><span class="token punctuation">}}</span></span></span><br><span class="token tag"><span class="token ld"><span class="token punctuation">{%</span> <span class="token keyword">endblock</span></span> <span class="token rd"><span class="token punctuation">%}</span></span></span></code></pre><h4 id="using-a-filter">Using a Filter <a class="directLink" href="#using-a-filter">#</a></h4><p>With a WordPress filter, you can use a specific PHP template for all your password protected posts. Note: this is accomplished using only standard WordPress functions. This is nothing special to Timber</p><p><strong>functions.php</strong></p><pre class="language-php"><code class="language-php"><span class="token comment">/**<br> * Use specific template for password protected posts.<br> *<br> * By default, this will use the `password-protected.php` template file. If you want password<br> * templates specific to a post type, use `password-protected-$posttype.php`.<br> */</span><br><span class="token function">add_filter</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'template_include'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'get_password_protected_template'</span><span class="token punctuation">,</span> <span class="token number">99</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">get_password_protected_template</span><span class="token punctuation">(</span> <span class="token variable">$template</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">global</span> <span class="token variable">$post</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span> <span class="token keyword">empty</span><span class="token punctuation">(</span> <span class="token variable">$post</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">post_password_required</span><span class="token punctuation">(</span> <span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">ID</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token variable">$template</span> <span class="token operator">=</span> <span class="token function">locate_template</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><br>            <span class="token single-quoted-string string">'password-protected.php'</span><span class="token punctuation">,</span><br>            <span class="token double-quoted-string string">"password-protected-<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">post_type</span><span class="token punctuation">}</span></span>.php"</span><span class="token punctuation">,</span><br>        <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">?</span><span class="token punctuation">:</span> <span class="token variable">$template</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">return</span> <span class="token variable">$template</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>With this filter, you can use a <strong>password-protected.php</strong> template file with the following contents:</p><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><br><br><span class="token variable">$context</span>                  <span class="token operator">=</span> Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$context</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'post'</span><span class="token punctuation">]</span>          <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timber<span class="token punctuation">\</span>Post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$context</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'password_form'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">get_the_password_form</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>Timber<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">render</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'password-protected.twig'</span><span class="token punctuation">,</span> <span class="token variable">$context</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre><p>To display the password on the page, you could then use <code>{{ password_form }}</code> in your Twig file.</p></div></article></main></div><script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script>docsearch({
    apiKey: '4907f57b267887b1da360de600656085',
    indexName: 'timber',
    inputSelector: '#search-input',
    debug: true // Set debug to true if you want to inspect the dropdown
  })</script></body></html>